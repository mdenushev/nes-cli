(function(t){function e(e){for(var s,r,c=e[0],u=e[1],a=e[2],h=0,p=[];h<c.length;h++)r=c[h],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&p.push(o[r][0]),o[r]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(t[s]=u[s]);l&&l(e);while(p.length)p.shift()();return i.push.apply(i,a||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],s=!0,c=1;c<n.length;c++){var u=n[c];0!==o[u]&&(s=!1)}s&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var s={},o={app:0},i=[];function r(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=s,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/nes-cli/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var a=0;a<c.length;a++)e(c[a]);var l=u;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",attrs:{id:"app"}},[n("b-row",{attrs:{"align-v":"center"}},[n("b-form-input",{staticClass:"col-6",attrs:{type:"url",placeholder:"Host",state:t.hostState,disabled:t.isConnected},model:{value:t.host,callback:function(e){t.host=e},expression:"host"}},[t._v("Host ")]),n("b-form-checkbox",{staticClass:"col-2",attrs:{disabled:t.isConnected},model:{value:t.auth,callback:function(e){t.auth=e},expression:"auth"}},[t._v("Authorization")]),n("b-button",{staticClass:"col-4",attrs:{variant:"primary"},on:{click:t.connectButtonOnClick}},[t._v(t._s(t.isConnected?"Disconnect":"Connect"))])],1),n("b-row",[n("p",[t._v("Status: "),n("span",{class:t.isConnected?"text-success":"text-danger"},[t._v(t._s(t.isConnected?"Connected":t.connectionError?t.connectionError:"Disconnected")+" ")])])]),t.auth&&!t.isConnected?n("b-row",[n("span",[t._v("Authorization information")]),n("VJsoneditor",{attrs:{height:"250px",options:{mode:"code"}},model:{value:t.authSettings,callback:function(e){t.authSettings=e},expression:"authSettings"}})],1):t._e(),t.isConnected?n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("b-input-group",[n("b-input-group-prepend",[n("b-form-select",{attrs:{options:t.methods},model:{value:t.method,callback:function(e){t.method=e},expression:"method"}})],1),n("b-form-input",{attrs:{placeholder:"Url"},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}},[t._v("URL")])],1)],1),n("b-col",{attrs:{cols:"3"}},[n("b-button",{attrs:{block:"",variant:"primary"},on:{click:t.nesSend}},[t._v("Send")])],1),n("b-col",{attrs:{cols:"3"}},[n("b-button",{attrs:{block:"",variant:"primary"},on:{click:t.nesSubscribe}},[t._v("Subscribe")])],1)],1):t._e(),t.isConnected?n("b-row",{staticClass:"mt-2"},[n("b-col",{attrs:{cols:"4"}},[n("span",[t._v("Payload")]),n("VJsoneditor",{attrs:{height:"500px",options:{mode:"code"}},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1),n("b-col",{attrs:{cols:"5"}},[n("span",[t._v("Result")]),n("VJsoneditor",{attrs:{height:"500px",options:{mode:"code",onEditable:function(){return!1}}},model:{value:t.output,callback:function(e){t.output=e},expression:"output"}})],1),n("b-col",{attrs:{cols:"3"}},[n("p",[t._v("History "),n("b-link",{attrs:{size:"sm"},on:{click:t.clearHistory}},[t._v("Clear")])],1),n("b-list-group",{staticClass:"history"},[0===t.history.length?n("b-list-group-item",[t._v("No records.")]):t._e(),t._l(t.history,(function(e,s){return n("b-list-group-item",{key:s,staticClass:"d-flex justify-content-between align-items-center",attrs:{variant:s===t.currentRecord?"success":"subscription"===e.type?"warning":"secondary"},on:{click:function(e){return t.changeCurrentRecord(s)}}},[n("span",[t._v(t._s(e.path))]),n("span",{staticClass:"text"},[t._v(t._s(t.getDateString(e.date)))])])}))],2)],1)],1):t._e()],1)},i=[],r=(n("4de4"),n("a15b"),n("ac1f"),n("466d"),n("27f7")),c=n("1aa2");function u(t,e,n){return n=n||"0",t+="",t.length>=e?t:new Array(e-t.length+1).join(n)+t}var a={name:"app",components:{VJsoneditor:r["a"]},data:function(){var t=getCookie("last_host"),e=getCookie("last_url");return{host:t||"wss://example.com/api",auth:!1,authSettings:{headers:{Authorization:"jwt"}},isConnected:!1,history:[],subscriptions:{},nes:null,url:e||"/items",input:null,output:null,method:"GET",methods:["GET","POST","PUT","DELETE"],connectionError:null,currentRecord:0}},watch:{currentRecord:function(t){this.history[t]?"request"===this.history[t].type?(this.$set(this,"input",this.history[t].input),this.$set(this,"output",this.history[t].output)):"subscription"===this.history[t].type&&(this.$set(this,"input",{}),this.$set(this,"output",this.history[t].data)):(this.$set(this,"input",{}),this.$set(this,"output",{}))}},computed:{hostState:function(){return null!==this.host.match(/^ws(s)?:\/\/[\w\d.-]*(:[\d]{1,5})?(\/.*)*$/)}},methods:{connectButtonOnClick:function(){this.isConnected?this.nesDisconnect():this.nesConnect()},getDateString:function(t){return"".concat(u(t.getHours(),2),":")+"".concat(u(t.getMinutes(),2),":")+"".concat(u(t.getSeconds(),2),".")+"".concat(u(t.getMilliseconds(),3))},subscriptionCountMessages:function(t){return this.history.filter((function(e){return"subscription"===e.type&&e.path===t})).length},changeCurrentRecord:function(t){this.$set(this,"currentRecord",t)},handleSubscription:function(t,e,n){this.$set(this,"currentRecord",this.currentRecord+1),0===this.history.length&&(this.$set(this,"input",{}),this.$set(this,"output",t||{}),this.$set(this,"currentRecord",0)),this.history.unshift({type:"subscription",data:t||{},raw:{update:t,flags:e},path:n,date:new Date})},nesConnect:function(){var t=this;this.nes=new c["Client"](this.host);var e=this;return this.nes.connect({auth:this.authSettings}).then((function(){setCookie("last_host",t.host),e.$set(e,"isConnected",!0),e.$set(e,"connectionError",null),e.showToast("light","Connected successfully","")})).catch((function(t){e.$set(e,"connectionError",t.message),e.$set(e,"isConnected",!1),e.showToast("danger",t,"Connection error")})),!0},nesDisconnect:function(){var t=this;console.log("disconnect"),this.nes.disconnect().then((function(){t.$set(t,"isConnected",!1),t.$set(t,"connectionError",null),t.showToast("light","Disconnected successfully","")})).catch((function(e){t.showToast("danger",e,"Disconnection error")}))},nesSend:function(){var t=this,e=this;this.$set(this,"output",null),this.nes.request({path:this.url,method:this.method,payload:this.input}).then((function(n){setCookie("last_url",t.url),e.$set(e,"output",n.payload),e.history.unshift({type:"request",method:e.method,input:null!==e.input?e.input:{},path:e.url,output:null!==n.payload?n.payload:{},status:n.statusCode,date:new Date}),e.$set(e,"currentRecord",0)})).catch((function(e){t.showToast("danger",e.message,"Error")}))},nesSubscribe:function(){var t=this,e=this.url;this.nes.subscribe(this.url,(function(n,s){t.handleSubscription(n,s,e)})).then((function(){setCookie("last_url",t.url),t.$set(t.subscriptions,t.url,{path:t.url}),t.showToast("success","Subscribed on path ".concat(t.url),"Subscribed successfully")})).catch((function(e){t.showToast("danger","Error: "+e.message,"Subscription failed")}))},showToast:function(t,e,n){this.$bvToast.toast(e,{title:n,variant:t,solid:!0,appendToast:!0,toaster:"b-toaster-bottom-right"})},clearHistory:function(){this.$set(this,"history",[]),this.$set(this,"currentRecord",0)}}},l=a,h=(n("034f"),n("2877")),p=Object(h["a"])(l,o,i,!1,null,null,null),d=p.exports,f=n("5f5b"),b=(n("f9e3"),n("2dd8"),n("bcb2")),g=n.n(b);s["default"].config.productionTip=!1,s["default"].use(f["a"]),s["default"].use(g.a),new s["default"]({render:function(t){return t(d)}}).$mount("#app")},"85ec":function(t,e,n){}});
//# sourceMappingURL=app.5a9b5ee6.js.map